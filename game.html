<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav 1!</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. -->

  <body>
    <div class="main-container">
      <!-- Healthbars til heroene -->
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar healer-health"></div>
          <div class="text-container">
            <p id="healer-name-txt">Healerens navn</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar archer-health"></div>
          <div class="text-container">
            <p id="archer-name-txt">Archerens navn</p>
            <p id="archer-health-txt">600 / 600 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar warrior-health"></div>
          <div class="text-container">
            <p id="warrior-name-txt">Warriorens navn</p>
            <p id="warrior-health-txt">800 / 800 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar dragon-health"></div>
          <div class="text-container">
            <p id="dragon-name-txt">Dragens navn</p>
            <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene -->
      <div class="img-container healer">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div class="img-container archer">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div class="img-container warrior">
        <img class="hero" src="assets/warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div class="enemy-container">
        <div class="img-container dragon-container">
          <img class="dragon" src="assets/dragon.png" />
        </div>
      </div>
    </div>
    <script>
      //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på.

      //Stats for heroes
      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          maxHP: 500,
          currentHP: 500,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };

      //---------------OPPGAVE 1--------------

      /*Når brukeren trykker på en av heltene, skal helten angripe dragen.
        - Det skal komme en alert hvor det står: "(Heltens name)" har gjort (heltens damage) skade på (Dragens name)!"
        - Dragens liv (currentHP) skal bli trukket med heltens damage, avhengig av hvilken helt den ble angrepet av.
        - Dragens currentHP blir oppdatert i arrayet

        Påkrevde teknikker: alert, function, onclick/eventListener, manipulering av array-objekter*/

      document.querySelector(".healer").addEventListener("click", function () {
        heroAttack(heroesArray[0]);
      });

      document.querySelector(".archer").addEventListener("click", function () {
        heroAttack(heroesArray[1]);
      });

      document.querySelector(".warrior").addEventListener("click", function () {
        heroAttack(heroesArray[2]);
      });

      function heroAttack(hero) {
        alert(
          `${hero.name} har gjort ${hero.damage} skade på ${dragonObject.name}!`
        );
        dragonObject.currentHP -= hero.damage;
        let dragonHealthTxt = document.querySelector(".dragon-health-txt");
        dragonHealthTxt.innerHTML = `${dragonObject.currentHP} / ${dragonObject.maxHP} HP`;
        dragonAttack();
      }


      //--------------OPPGAVE 2------------------

      /*Dragen skal gjøre et motangrep umiddelbart når den blir angrepet av en helt.

        - Dragen skal angripe en tilfeldig helt. Det er altså 1/3 sjanse for hver helt å bli angrepet
        - Dragen skal kun angripe helter som er i live, "alive"-propertien for helten må være true.
        - Det skal komme en ny alert hvor det står: "(Dragens name) har angrepet (Heltens name)!"
        - Helten som ble angrepet sitt liv (currentHP) skal bli trukket med dragens damage.
        - Heltens currentHP blir oddatert i arrayet

        Påkrevde teknikker: alert, function, onclick/eventListener, manipulering av array-objekter, Math.floor, Math.random, if-else/switch/array-metode*/

      const dragon = document.querySelector(".dragon")
      dragon.onclick = dragonAttack;

      function dragonAttack() {
       
        let livingHeroes = heroesArray.filter((hero) => hero.currentHP > 0);

        
        let randomHero = livingHeroes[Math.floor(Math.random() * livingHeroes.length)];

        
        alert(`${dragonObject.name} has attacked ${randomHero.name}!`);

        
        randomHero.currentHP -= dragonObject.damage;

        
        heroesArray.forEach((hero) => {
          if (hero.name === randomHero.name) {
            hero.currentHP = randomHero.currentHP;
          }
        });

        console.log(`${randomHero.name} now has ${randomHero.currentHP} HP`);
      }
      
      //--------------OPPGAVE 2------------------

      /*Dragen skal gjøre et motangrep umiddelbart når den blir angrepet av en helt.

        - Dragen skal angripe en tilfeldig helt. Det er altså 1/3 sjanse for hver helt å bli angrepet
        - Dragen skal kun angripe helter som er i live, "alive"-propertien for helten må være true.
        - Det skal komme en ny alert hvor det står: "(Dragens name) har angrepet (Heltens name)!"
        - Helten som ble angrepet sitt liv (currentHP) skal bli trukket med dragens damage.
        - Heltens currentHP blir oddatert i arrayet

        Påkrevde teknikker: alert, function, onclick/eventListener, manipulering av array-objekter, Math.floor, Math.random, if-else/switch/array-metode*/


      //---------------OPPGAVE 3 --------------------
      /*En helt er død!
      
      - Dersom en helt sin currentHP blir 0 eller mindre, skal helten(e) forsvinne fra nettleseren og "alive"-propertien skal bli false. Denne helten er nå død, og dragen vil ikke vurdere å angripe denne helten.
      - Spillet fortsetter!
      
      Påkrevde metoder: function, .remove, if/else/switch/array-metode, manipulering av array-objekter*/
    </script>
  </body>
</html>
